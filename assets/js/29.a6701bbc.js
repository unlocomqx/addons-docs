(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{216:function(t,a,s){"use strict";s.r(a);var e=s(6),r=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"php-calculation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#php-calculation"}},[t._v("#")]),t._v(" PHP calculation")]),t._v(" "),a("p",[t._v("If your calculation is very complex or requires custom logic, then you can use a PHP file to do it.\nPHP can help you in these situations for example:")]),t._v(" "),a("ul",[a("li",[t._v("Your calculation is too complex to be written in a formula")]),t._v(" "),a("li",[t._v("You want to access a PrestaShop variable that is not available in the formula")]),t._v(" "),a("li",[t._v("You want to fetch data from a remote service")])]),t._v(" "),a("p",[t._v("Here are the available methods to use a PHP file:")]),t._v(" "),a("ul",[a("li",[t._v("To calculate the "),a("RouterLink",{attrs:{to:"/dynamicproduct/product-config/08-formulas.html#price-formula"}},[t._v("price formula")])],1),t._v(" "),a("li",[t._v("To calculate the "),a("RouterLink",{attrs:{to:"/dynamicproduct/product-config/08-formulas.html#weight-formula"}},[t._v("weight formula")])],1),t._v(" "),a("li",[t._v("To calculate\nthe "),a("RouterLink",{attrs:{to:"/dynamicproduct/product-config/08-formulas.html#quantity-formula"}},[t._v("quantity formula")])],1),t._v(" "),a("li",[t._v("To assign the value of\na "),a("RouterLink",{attrs:{to:"/dynamicproduct/product-config/07-fields.html#dynamic-variable"}},[t._v("dynamic field")]),t._v(" from PHP")],1),t._v(" "),a("li",[t._v("To "),a("RouterLink",{attrs:{to:"/dynamicproduct/16-php-calculation.html#declaring-javascript-variables-from-php"}},[t._v("declare JavaScript variables")]),t._v("\nto use it in a "),a("RouterLink",{attrs:{to:"/dynamicproduct/17-custom-scripts.html"}},[t._v("custom script")])],1)]),t._v(" "),a("h2",{attrs:{id:"accessing-fields-from-php"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#accessing-fields-from-php"}},[t._v("#")]),t._v(" Accessing fields from PHP")]),t._v(" "),a("p",[t._v("In any PHP file that you create inside the folder "),a("code",[t._v("/dynamicproduct")]),t._v(", the fields will be available\nwith their current values. For example, if you have fields "),a("code",[t._v("width")]),t._v(", "),a("code",[t._v("length")]),t._v(" and "),a("code",[t._v("height")]),t._v(", you can\naccess them using the variables\n"),a("code",[t._v("$width")]),t._v(", "),a("code",[t._v("$length")]),t._v(" and "),a("code",[t._v("$height")]),t._v(" respectively."),a("br"),t._v("\nIn the same way, you can change a field value by directly assigning a new value to the corresponding\nvariable, for example:")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$width")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$length")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$text")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'Hello'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("Additionally, the module provides a variable named "),a("code",[t._v("$changed")]),t._v("\nwhich indicates the name of the field that was changed by the customer."),a("br"),t._v("\nThis can be useful if you want to only update the field that wasn't changed when two fields depend\non each other.")]),t._v(" "),a("h2",{attrs:{id:"accessing-prestashop-functions"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#accessing-prestashop-functions"}},[t._v("#")]),t._v(" Accessing PrestaShop functions")]),t._v(" "),a("p",[t._v("In the calculation file, you can access any PrestaShop function as well, here are some examples:")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// fetch a file from a remote service")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$content")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name static-context"}},[t._v("Tools")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("file_get_contents")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'http://google.com'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// get the group of the current customer")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$id_group")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name static-context"}},[t._v("Context")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getContext")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("customer")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("id_default_group")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// get the category id of the current product")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$id_category")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Product")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$id_product")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("id_category_default")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"other-available-variables"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#other-available-variables"}},[t._v("#")]),t._v(" Other available variables")]),t._v(" "),a("p",[t._v("In addition to the fields, the module provides other variables in the PHP context:")]),t._v(" "),a("div",{staticClass:"language-phpdoc extra-class"},[a("pre",{pre:!0,attrs:{class:"language-phpdoc"}},[a("code",[t._v("// The ID of the current product\n/** "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("@var")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("$id_product")]),t._v(" */\n\n// The selected combination ID\n/** "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("@var")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("$id_attribute")]),t._v(" */\n\n// The current selected quantity\n/** "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("@var")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("$quantity")]),t._v(" */\n\n// The product base price\n/** "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("@var")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("float")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("$product_price")]),t._v(" */\n\n// The product base weight\n/** "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("@var")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("float")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("$product_weight")]),t._v(" */\n\n// The name of the field that the customer changed to trigger the calculation\n/** "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("@var")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("string")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("$changed")]),t._v(" */\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("You can copy the above code to help you with autocompletion")])]),t._v(" "),a("h2",{attrs:{id:"assigning-a-value-to-a-field-field-allocation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#assigning-a-value-to-a-field-field-allocation"}},[t._v("#")]),t._v(" Assigning a value to a field (Field Allocation)")]),t._v(" "),a("p",[t._v("You can assign a value to field dynamically using PHP."),a("br"),t._v("\nFirst, create a php file in the folder "),a("code",[t._v("/dynamicproduct/allocations")])]),t._v(" "),a("ul",[a("li",[t._v("Name the file "),a("code",[t._v("products.php")]),t._v(" if you want to target all products")]),t._v(" "),a("li",[t._v("Name the file "),a("code",[t._v("productX.php")]),t._v(" if you want to target only the product with ID="),a("strong",[t._v("X")])])]),t._v(" "),a("p",[t._v("You can "),a("RouterLink",{attrs:{to:"/dynamicproduct/16-php-calculation.html#accessing-fields-from-php"}},[t._v("access fields by name")]),t._v(" and\nyou can also assign a value to fields by name, here are some examples:")],1),t._v(" "),a("ul",[a("li",[t._v("Assign a value to an area field (this can be done\nusing "),a("RouterLink",{attrs:{to:"/dynamicproduct/product-config/10-field-formulas.html"}},[t._v("Field formulas")]),t._v(" but it's here only as\nan example)")],1)]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Assuming you have fields named area, width and length")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$area")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$width")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$length")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("ul",[a("li",[t._v("Assign a PrestaShop variable or state to a field")])]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Assuming you have a field named logged_in")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$logged_in")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword type-casting"}},[t._v("int")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token class-name static-context"}},[t._v("Context")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getContext")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("customer")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("isLogged")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// This will return 1 or 0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// It can be used to show/hide fields using the conditions feature for example")]),t._v("\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("Don't forget to create\na "),a("RouterLink",{attrs:{to:"/dynamicproduct/product-config/07-fields.html#dynamic-variable"}},[t._v("dynamic variable")]),t._v(" field before\nassigning its value")],1)]),t._v(" "),a("p",[t._v("Once you assign a value to a field, you can use it in the price formula and all other formulas and\nfunctions such as the intervals, the conditions and the grids etc...")]),t._v(" "),a("h2",{attrs:{id:"price-calculation-using-php"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#price-calculation-using-php"}},[t._v("#")]),t._v(" Price calculation using PHP")]),t._v(" "),a("p",[t._v("To calculate the price, place a PHP file in the folder "),a("code",[t._v("/dynamicproduct/calculator")])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("Name the file "),a("code",[t._v("products.php")]),t._v(" if you want to target all products")])]),t._v(" "),a("li",[a("p",[t._v("Name the file "),a("code",[t._v("productX.php")]),t._v(" if you want to target only the product with ID="),a("strong",[t._v("X")]),a("br"),t._v("\nFor example:"),a("br"),t._v(" "),a("code",[t._v("product1.php")]),t._v(" will target product "),a("code",[t._v("#1")]),a("br"),t._v(" "),a("code",[t._v("product42.php")]),t._v(" will target product "),a("code",[t._v("#42")]),a("br"),t._v("\nThe product "),a("strong",[t._v("ID")]),t._v(" is displayed in the product list in the backoffice")]),t._v(" "),a("img",{staticClass:"padding border",attrs:{src:"/optimized/dynamicproduct/images/php-ids-1x.webp",width:"375",height:"338",loading:"lazy","data-zoom-src":"/optimized/dynamicproduct/images/php-ids.webp",srcset:"/optimized/dynamicproduct/images/php-ids.webp 2x"}})])]),t._v(" "),a("p",[t._v("In the price calculation, you need to assign a "),a("code",[t._v("$result")]),t._v(" variable at the end of the calculation.")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("Initially, the "),a("code",[t._v("$result")]),t._v(" variable will contain the price formula result")])]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$result")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$width")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$length")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10000")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("Examples:")]),t._v(" "),a("ul",[a("li",[t._v("Apply a discount when width is bigger than 100"),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$width")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// We don't assign a new value in this case, we simply reduce the price formula result ")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$result")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$result")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.8")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),a("li",[t._v("Get a unit price from a remote service")])]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$unit_price")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword type-casting"}},[t._v("float")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token class-name static-context"}},[t._v("Tools")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("file_get_contents")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'https://remoteservice.com/pricing.php'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$result")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$length")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$unit_price")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n")])])]),a("h2",{attrs:{id:"weight-calculation-using-php"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#weight-calculation-using-php"}},[t._v("#")]),t._v(" Weight calculation using PHP")]),t._v(" "),a("p",[t._v("The weight calculation is done exactly in the same way\nas "),a("RouterLink",{attrs:{to:"/dynamicproduct/16-php-calculation.html#price-calculation-using-php"}},[t._v("the price calculation")]),t._v(",\nexcept for two differences.")],1),t._v(" "),a("ul",[a("li",[t._v("The variable that has to be assigned is called "),a("code",[t._v("$weight")])]),t._v(" "),a("li",[t._v("The file names are "),a("code",[t._v("weights.php")]),t._v(" and "),a("code",[t._v("weightX.php")]),t._v(" to target a product with ID="),a("strong",[t._v("X")])])]),t._v(" "),a("p",[t._v("Here's an example")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Calculate the weight based on the volume")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$weight")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$width")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$length")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$depth")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("Initially, the "),a("code",[t._v("$weight")]),t._v(" variable will contain the weight formula result")])]),t._v(" "),a("h2",{attrs:{id:"quantity-calculation-using-php"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#quantity-calculation-using-php"}},[t._v("#")]),t._v(" Quantity calculation using PHP")]),t._v(" "),a("p",[t._v("The quantity calculation is also very similar\nto "),a("RouterLink",{attrs:{to:"/dynamicproduct/16-php-calculation.html#price-calculation-using-php"}},[t._v("the price calculation")]),t._v(", but\nhere's the two differences:")],1),t._v(" "),a("ul",[a("li",[t._v("The variable that you need to assign is called "),a("code",[t._v("$qty")])]),t._v(" "),a("li",[t._v("The file names are "),a("code",[t._v("quantity.php")]),t._v(" and "),a("code",[t._v("quantityX.php")]),t._v(" to target a product with ID="),a("strong",[t._v("X")]),a("br"),t._v("\nHere are some examples:")])]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Retract from the stock by meter squared instead of units")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$qty")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$width")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$length")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("Initially, the "),a("code",[t._v("$qty")]),t._v(" variable will contain the quantity formula result")])]),t._v(" "),a("h2",{attrs:{id:"declaring-javascript-variables-from-php"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#declaring-javascript-variables-from-php"}},[t._v("#")]),t._v(" Declaring JavaScript variables from PHP")]),t._v(" "),a("p",[t._v("The module allows you to declare JavaScript variables that you can use in your custom scripts."),a("br"),t._v("\nFirst, create a php file in the folder "),a("code",[t._v("/dynamicproduct/declarations")])]),t._v(" "),a("ul",[a("li",[t._v("Name the file "),a("code",[t._v("products.php")]),t._v(" if you want to target all products")]),t._v(" "),a("li",[t._v("Name the file "),a("code",[t._v("productX.php")]),t._v(" if you want to target only the product with ID="),a("strong",[t._v("X")])])]),t._v(" "),a("p",[t._v("The variables that you need to assign is called "),a("code",[t._v("$declarations")]),t._v(", it's a PHP array.")]),t._v(" "),a("p",[t._v("Here's a code example")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$declarations")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("array")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'id_category'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Product")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$id_product")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("id_category_default")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'id_group'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name static-context"}},[t._v("Context")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getContext")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("customer")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("id_default_group")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("These variables can be then accessed from JavaScript like this")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id_category\nwindow"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id_group\n")])])])])}),[],!1,null,null,null);a.default=r.exports}}]);