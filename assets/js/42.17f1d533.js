(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{230:function(t,a,s){"use strict";s.r(a);var e=s(6),r=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"common-cases"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#common-cases"}},[t._v("#")]),t._v(" Common cases")]),t._v(" "),a("p",[t._v("Here are some common cases that many merchants encounter. It can be a simpler way to get you started with the module.")]),t._v(" "),a("p",[t._v("Each feature will have a link to the corresponding documentation page. You can find more detailed information there.")]),t._v(" "),a("p",[t._v("You can also find many product examples in the "),a("a",{attrs:{href:"https://dynamic-front.prestalife.net/",target:"_blank",rel:"noopener noreferrer"}},[t._v("examples demo"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"examples"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#examples"}},[t._v("#")]),t._v(" Examples")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#charge-based-on-a-product-area"}},[t._v("Charge based on a product area")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#add-extra-cost-based-on-a-selected-option"}},[t._v("Add extra cost based on a selected option")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#add-extra-cost-based-on-a-checkbox"}},[t._v("Add extra cost based on a checkbox")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#charge-a-minimum-price"}},[t._v("Charge a minimum price")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#display-a-custom-error-message"}},[t._v("Display a custom error message")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#read-any-variable-from-prestashop"}},[t._v("Read any variable from PrestaShop")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#invert-the-tax-calculation"}},[t._v("Invert the tax calculation")])])]),t._v(" "),a("h2",{attrs:{id:"charge-based-on-a-product-area"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#charge-based-on-a-product-area"}},[t._v("#")]),t._v(" Charge based on a product area")]),t._v(" "),a("p",[t._v("Create a width and height "),a("RouterLink",{attrs:{to:"/dynamicproduct/product-config/07-fields.html"}},[t._v("field")]),t._v(" then configure\nthis "),a("RouterLink",{attrs:{to:"/dynamicproduct/product-config/08-formulas.html"}},[t._v("price formula")]),t._v(" for example:")],1),t._v(" "),a("div",{staticClass:"language-xls extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xls"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("height"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("\n")])])]),a("p",[t._v("But in most cases, the fields are in centimeters, so you need to convert them to meters:")]),t._v(" "),a("div",{staticClass:"language-xls extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xls"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("height"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10000")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("\n")])])]),a("p",[t._v("In this case, you are charging 10€ for each square meter.")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("In the docs, Euros are used, but it depends on your shop's default currency.")])]),t._v(" "),a("p",[t._v("You can even create a "),a("RouterLink",{attrs:{to:"/dynamicproduct/product-config/07-fields.html#dynamic-variable"}},[t._v("dynamic variable field")]),t._v(" called *\n"),a("em",[t._v("area")]),t._v("* and assign the area to it using a "),a("RouterLink",{attrs:{to:"/dynamicproduct/product-config/10-field-formulas.html"}},[t._v("field formula")]),t._v(".")],1),t._v(" "),a("p",[t._v("Then you can use this variable in the price formula:")]),t._v(" "),a("div",{staticClass:"language-xls extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xls"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("area"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("height"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10000")]),t._v("\n")])])]),a("p",[t._v("Then the price formula becomes:")]),t._v(" "),a("div",{staticClass:"language-xls extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xls"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("area"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("\n")])])]),a("h2",{attrs:{id:"add-extra-cost-based-on-a-selected-option"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#add-extra-cost-based-on-a-selected-option"}},[t._v("#")]),t._v(" Add extra cost based on a selected option")]),t._v(" "),a("p",[t._v("You can create a "),a("RouterLink",{attrs:{to:"/dynamicproduct/product-config/07-fields.html#dropdown"}},[t._v("dropdown field")]),t._v(" called *\n"),a("em",[t._v("material")]),t._v("* with\noptions like:")],1),t._v(" "),a("ul",[a("li",[t._v("Metal")]),t._v(" "),a("li",[t._v("Wood")]),t._v(" "),a("li",[t._v("Plastic")])]),t._v(" "),a("p",[t._v("Then you can assign a value to each option of the dropdown and use the field directly in the price formula:")]),t._v(" "),a("div",{staticClass:"language-xls extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xls"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("material"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),a("p",[t._v("The field value will be replaced by the value of the selected option.")]),t._v(" "),a("p",[t._v("So it will be easy to add many options like this")]),t._v(" "),a("div",{staticClass:"language-xls extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xls"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("material"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("color"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("size"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" etc...\n")])])]),a("p",[t._v("You can even charge based on the "),a("strong",[t._v("area")]),t._v(" and "),a("strong",[t._v("material")]),t._v(" like this")]),t._v(" "),a("div",{staticClass:"language-xls extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xls"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("area"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("material"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),a("h2",{attrs:{id:"add-extra-cost-based-on-a-checkbox"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#add-extra-cost-based-on-a-checkbox"}},[t._v("#")]),t._v(" Add extra cost based on a checkbox")]),t._v(" "),a("p",[t._v("You can create a "),a("RouterLink",{attrs:{to:"/dynamicproduct/product-config/07-fields.html#checkbox"}},[t._v("checkbox field")]),t._v(" called "),a("em",[t._v("gift_wrap")]),t._v(" for example.")],1),t._v(" "),a("p",[t._v("Then you can use it in the price formula like this:")]),t._v(" "),a("div",{staticClass:"language-xls extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xls"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("gift_wrap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("\n")])])]),a("p",[t._v("or you can use the "),a("RouterLink",{attrs:{to:"/dynamicproduct/15-formula-functions.html#if"}},[t._v("IF")]),t._v(" function to add a cost only if the checkbox is checked")],1),t._v(" "),a("div",{staticClass:"language-xls extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xls"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function-name builtin"}},[t._v("IF")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("gift_wrap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h2",{attrs:{id:"charge-a-minimum-price"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#charge-a-minimum-price"}},[t._v("#")]),t._v(" Charge a minimum price")]),t._v(" "),a("p",[t._v("You can use the "),a("code",[t._v("max")]),t._v(" "),a("RouterLink",{attrs:{to:"/dynamicproduct/15-formula-functions.html#max"}},[t._v("function")]),t._v(" to set a minimum price. For example, if\nyou want to charge at least 10€:")],1),t._v(" "),a("div",{staticClass:"language-xls extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xls"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function-name builtin"}},[t._v("MAX")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("area"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("The "),a("code",[t._v("max")]),t._v(" function will return the highest value between the two.")]),t._v(" "),a("h2",{attrs:{id:"display-a-custom-error-message"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#display-a-custom-error-message"}},[t._v("#")]),t._v(" Display a custom error message")]),t._v(" "),a("p",[t._v("You can use the "),a("RouterLink",{attrs:{to:"/dynamicproduct/product-config/07-fields.html#error-message"}},[t._v("error message field")]),t._v(" to display a custom\nerror.")],1),t._v(" "),a("p",[t._v("Then you can control the visibility of the error message using\na "),a("RouterLink",{attrs:{to:"/dynamicproduct/product-config/09-conditions.html"}},[t._v("condition")]),t._v(".")],1),t._v(" "),a("h3",{attrs:{id:"example"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#example"}},[t._v("#")]),t._v(" Example")]),t._v(" "),a("p",[t._v("Display an error when the ordered area is less than 1 square meter:")]),t._v(" "),a("p",[t._v("Condition formula:")]),t._v(" "),a("div",{staticClass:"language-xls extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xls"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("area"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n")])])]),a("p",[t._v("Then you can hide the error message in the condition fields.")]),t._v(" "),a("img",{staticClass:"border",attrs:{src:"/optimized/dynamicproduct/images/error-message-condition-1x.webp",width:"581",height:"213",loading:"lazy","data-zoom-src":"/optimized/dynamicproduct/images/error-message-condition.webp",srcset:"/optimized/dynamicproduct/images/error-message-condition.webp 2x"}}),t._v(" "),a("h2",{attrs:{id:"read-any-variable-from-prestashop"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#read-any-variable-from-prestashop"}},[t._v("#")]),t._v(" Read any variable from PrestaShop")]),t._v(" "),a("p",[t._v("In this example, we will read the customer group and apply a discount based on it.")]),t._v(" "),a("p",[t._v("1- Create a dynamic field called "),a("code",[t._v("customer_group")]),t._v(" and set the type to "),a("code",[t._v("Dynamic Variable")]),t._v(".\n2- Create a php file in "),a("code",[t._v("[Root of PrestaShop]/dynamicproduct/allocations/products.php")]),t._v(" and add this code:")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token php language-php"}},[a("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("<?php")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("isset")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$customer_group")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$context")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name static-context"}},[t._v("Context")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getContext")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$default_lang")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name static-context"}},[t._v("Configuration")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'PS_LANG_DEFAULT'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$id_customer_group")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword type-casting"}},[t._v("int")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$context")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("customer")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("id_default_group")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$id_customer_group")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$group")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Group")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$id_customer_group")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$default_lang")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n         "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// customer_group will contain assign Guest, Visitor, etc...")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$customer_group")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$group")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),a("p",[t._v("Then you can easily create discounts for each group of your choice using the "),a("RouterLink",{attrs:{to:"/dynamicproduct/product-config/12-intervals.html"}},[t._v("Intervals")]),t._v(" for example")],1),t._v(" "),a("h3",{attrs:{id:"example-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#example-2"}},[t._v("#")]),t._v(" Example")]),t._v(" "),a("p",[t._v("An interval that varies the value of a discount field")]),t._v(" "),a("img",{staticClass:"border",attrs:{src:"/optimized/dynamicproduct/images/customer-groups-interval-1x.webp",width:"1019",height:"340",loading:"lazy","data-zoom-src":"/optimized/dynamicproduct/images/customer-groups-interval.webp",srcset:"/optimized/dynamicproduct/images/customer-groups-interval.webp 2x"}}),t._v(" "),a("p",[t._v("Finally, you can use this discount field in your price formula")]),t._v(" "),a("div",{staticClass:"language-xls extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xls"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("height"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("discount"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("This will apply a discount based on the customer group.")]),t._v(" "),a("img",{staticClass:"border",attrs:{src:"/optimized/dynamicproduct/images/customer-group-discount-1x.webp",width:"572",height:"404",loading:"lazy","data-zoom-src":"/optimized/dynamicproduct/images/customer-group-discount.webp",srcset:"/optimized/dynamicproduct/images/customer-group-discount.webp 2x"}}),t._v(" "),a("h2",{attrs:{id:"invert-the-tax-calculation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#invert-the-tax-calculation"}},[t._v("#")]),t._v(" Invert the tax calculation")]),t._v(" "),a("p",[t._v("By default, the module applies the tax to the calculated price."),a("br"),t._v("\nIf you want to invert the tax calculation, you can use the "),a("RouterLink",{attrs:{to:"/dynamicproduct/16-php-calculation.html"}},[t._v("PHP calculation")]),t._v(" feature.")],1),t._v(" "),a("p",[t._v("1️⃣ Create a dynamic field called "),a("code",[t._v("tax_rate")]),t._v(" and set the type to "),a("code",[t._v("Dynamic Variable")]),t._v(".")]),t._v(" "),a("p",[t._v("2️⃣ Create a php file in "),a("code",[t._v("[Root of PrestaShop]/dynamicproduct/allocations/products.php")]),t._v(" and add this code:")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token php language-php"}},[a("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("<?php")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Will continue only if you have a field called tax_rate")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("isset")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$tax_rate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// first read the tax rate of the current product")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token doc-comment comment"}},[t._v("/** "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("@var")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("$module")]),t._v(" DynamicProduct */")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$tax_rate")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$module")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("calculator")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTax")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$id_product")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),a("p",[t._v("Now, you can use the "),a("code",[t._v("tax_rate")]),t._v(" field in your "),a("RouterLink",{attrs:{to:"/dynamicproduct/product-config/08-formulas.html#price-formula"}},[t._v("price formula")]),t._v(" or in any "),a("RouterLink",{attrs:{to:"/dynamicproduct/product-config/10-field-formulas.html"}},[t._v("field formula")]),t._v(" to invert the tax calculation.")],1),t._v(" "),a("p",[t._v("3️⃣ Use the field in your price formula")]),t._v(" "),a("div",{staticClass:"language-xls extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xls"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("height"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("tax_rate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("If you want to invert the tax calculation for any product that has a tax_rate field, you can add this code in the "),a("code",[t._v("[Root of PrestaShop]/dynamicproduct/calculator/products.php")]),t._v(" file")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token php language-php"}},[a("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("<?php")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$result")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$result")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$tax_rate")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])])])}),[],!1,null,null,null);a.default=r.exports}}]);